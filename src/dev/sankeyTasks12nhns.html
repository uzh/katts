<html title="sankey">

<style>
.node rect {
  cursor: move;
  fill-opacity: .9;
  shape-rendering: crispEdges;
}
.node text {
  pointer-events: none;
  text-shadow: 0 1px 0 #fff;
}
.link {
  fill: none;
  stroke: #000;
  stroke-opacity: .2;
}
.link:hover {
  stroke-opacity: .5;
}
</style>
<title>tasks12nhns</title>
<body>
<p id="chart">
<script type="text/javascript" src="http://d3js.org/d3.v2.min.js"></script>
<script type="text/javascript" src="https://raw.github.com/d3/d3-plugins/master/sankey/sankey.js"></script>
<script>
var units = "Messages";

var margin = {top: 10, right: 10, bottom: 10, left: 10},
    width = 2000 - margin.left - margin.right,
    height =3000 - margin.top - margin.bottom;

var formatNumber = d3.format(",.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + " " + units; },
    color = d3.scale.category20();

// append the svg canvas to the page
var svg = d3.select("#chart").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", 
          "translate(" + margin.left + "," + margin.top + ")");

// Set the sankey diagram properties
var sankey = d3.sankey()
    .nodeWidth(36)
    .nodePadding(40)
    .size([width, height]);

var path = sankey.link();

graph = JSON.parse('{"nodes":[{"name":"80"},{"name":"68"},{"name":"46"},{"name":"17"},{"name":"16"},{"name":"58"},{"name":"25"},{"name":"15"},{"name":"14"},{"name":"43"},{"name":"24"},{"name":"19"},{"name":"22"},{"name":"18"},{"name":"23"},{"name":"64"},{"name":"33"},{"name":"20"},{"name":"32"},{"name":"35"},{"name":"34"},{"name":"74"},{"name":"62"},{"name":"36"},{"name":"21"},{"name":"57"},{"name":"31"},{"name":"30"},{"name":"13"},{"name":"28"},{"name":"27"},{"name":"26"},{"name":"29"},{"name":"51"},{"name":"10"},{"name":"11"},{"name":"12"},{"name":"77"},{"name":"37"},{"name":"79"},{"name":"49"},{"name":"81"},{"name":"75"},{"name":"76"},{"name":"73"},{"name":"61"},{"name":"2"},{"name":"78"},{"name":"66"},{"name":"54"},{"name":"47"},{"name":"44"},{"name":"45"},{"name":"48"},{"name":"3"},{"name":"5"},{"name":"40"},{"name":"72"},{"name":"63"},{"name":"70"},{"name":"52"},{"name":"4"},{"name":"59"},{"name":"8"},{"name":"9"},{"name":"6"},{"name":"7"},{"name":"71"},{"name":"1"},{"name":"50"},{"name":"67"},{"name":"42"},{"name":"39"},{"name":"38"},{"name":"41"},{"name":"60"},{"name":"53"},{"name":"69"},{"name":"65"},{"name":"55"}],"links":[{"source":54,"value":4497,"target":18},{"source":54,"value":4700,"target":16},{"source":18,"value":5,"target":41},{"source":54,"value":4288,"target":27},{"source":54,"value":4809,"target":26},{"source":54,"value":3781,"target":23},{"source":54,"value":4212,"target":20},{"source":54,"value":4505,"target":19},{"source":55,"value":4850,"target":26},{"source":55,"value":4243,"target":27},{"source":20,"value":32,"target":41},{"source":55,"value":4411,"target":19},{"source":55,"value":4147,"target":20},{"source":55,"value":4743,"target":16},{"source":55,"value":4557,"target":18},{"source":55,"value":3972,"target":23},{"source":64,"value":4340,"target":27},{"source":64,"value":4741,"target":26},{"source":64,"value":4576,"target":18},{"source":64,"value":4860,"target":16},{"source":64,"value":4174,"target":20},{"source":64,"value":4406,"target":19},{"source":64,"value":3899,"target":23},{"source":66,"value":4482,"target":19},{"source":64,"value":4763,"target":32},{"source":66,"value":4119,"target":20},{"source":66,"value":3866,"target":23},{"source":66,"value":4742,"target":26},{"source":66,"value":4329,"target":27},{"source":66,"value":4799,"target":16},{"source":66,"value":4506,"target":18},{"source":63,"value":4415,"target":6},{"source":63,"value":4227,"target":29},{"source":63,"value":4576,"target":32},{"source":63,"value":4133,"target":31},{"source":63,"value":5022,"target":30},{"source":64,"value":4950,"target":30},{"source":64,"value":4248,"target":29},{"source":64,"value":4399,"target":6},{"source":64,"value":4131,"target":31},{"source":33,"value":53018,"target":54},{"source":33,"value":53574,"target":46},{"source":66,"value":4738,"target":32},{"source":33,"value":53164,"target":68},{"source":66,"value":4304,"target":29},{"source":66,"value":4858,"target":30},{"source":76,"value":160308,"target":53},{"source":66,"value":3957,"target":31},{"source":66,"value":4295,"target":6},{"source":76,"value":160224,"target":2},{"source":76,"value":160217,"target":50},{"source":65,"value":4920,"target":30},{"source":65,"value":3971,"target":31},{"source":33,"value":53487,"target":64},{"source":65,"value":4523,"target":6},{"source":33,"value":53615,"target":63},{"source":33,"value":52995,"target":66},{"source":33,"value":53126,"target":65},{"source":33,"value":53027,"target":55},{"source":65,"value":4683,"target":32},{"source":33,"value":53418,"target":61},{"source":65,"value":4055,"target":29},{"source":54,"value":4861,"target":30},{"source":54,"value":4280,"target":29},{"source":46,"value":4471,"target":6},{"source":54,"value":4597,"target":32},{"source":46,"value":4037,"target":31},{"source":46,"value":4858,"target":30},{"source":76,"value":160236,"target":9},{"source":46,"value":4227,"target":29},{"source":76,"value":160267,"target":71},{"source":46,"value":4860,"target":32},{"source":76,"value":160105,"target":52},{"source":54,"value":4454,"target":6},{"source":76,"value":160157,"target":51},{"source":54,"value":4034,"target":31},{"source":76,"value":160318,"target":74},{"source":76,"value":160336,"target":56},{"source":76,"value":160275,"target":72},{"source":60,"value":53748,"target":46},{"source":61,"value":5025,"target":30},{"source":60,"value":53349,"target":68},{"source":61,"value":4145,"target":31},{"source":60,"value":53609,"target":61},{"source":61,"value":4758,"target":32},{"source":60,"value":53185,"target":54},{"source":61,"value":4104,"target":29},{"source":76,"value":160418,"target":38},{"source":76,"value":160172,"target":73},{"source":55,"value":58289,"target":32},{"source":55,"value":57328,"target":31},{"source":55,"value":57698,"target":6},{"source":55,"value":58025,"target":29},{"source":61,"value":4447,"target":6},{"source":55,"value":57949,"target":30},{"source":16,"value":46,"target":41},{"source":61,"value":4449,"target":19},{"source":61,"value":3815,"target":23},{"source":61,"value":4796,"target":16},{"source":61,"value":4123,"target":20},{"source":61,"value":4881,"target":26},{"source":61,"value":4537,"target":18},{"source":61,"value":4338,"target":27},{"source":68,"value":4534,"target":6},{"source":63,"value":4400,"target":27},{"source":68,"value":3986,"target":31},{"source":68,"value":4916,"target":30},{"source":63,"value":4605,"target":18},{"source":68,"value":4300,"target":29},{"source":63,"value":4889,"target":26},{"source":0,"value":161342,"target":1},{"source":62,"value":272,"target":31},{"source":62,"value":134,"target":30},{"source":62,"value":230,"target":29},{"source":62,"value":104,"target":32},{"source":62,"value":327,"target":6},{"source":68,"value":4637,"target":32},{"source":63,"value":4196,"target":20},{"source":63,"value":4815,"target":16},{"source":63,"value":3801,"target":23},{"source":63,"value":4536,"target":19},{"source":32,"value":2,"target":41},{"source":68,"value":4193,"target":20},{"source":68,"value":4506,"target":19},{"source":68,"value":4392,"target":18},{"source":68,"value":4784,"target":16},{"source":68,"value":3798,"target":23},{"source":60,"value":53783,"target":36},{"source":60,"value":53395,"target":34},{"source":60,"value":53385,"target":35},{"source":69,"value":53385,"target":35},{"source":69,"value":53395,"target":34},{"source":69,"value":53783,"target":36},{"source":33,"value":53598,"target":36},{"source":33,"value":53202,"target":35},{"source":68,"value":4795,"target":26},{"source":33,"value":53197,"target":34},{"source":68,"value":4323,"target":27},{"source":42,"value":152451,"target":58},{"source":21,"value":159118,"target":22},{"source":44,"value":147040,"target":45},{"source":57,"value":159117,"target":75},{"source":23,"value":20,"target":41},{"source":53,"value":13951,"target":10},{"source":53,"value":13062,"target":12},{"source":53,"value":12552,"target":14},{"source":53,"value":13359,"target":17},{"source":53,"value":14167,"target":24},{"source":75,"value":87,"target":6},{"source":75,"value":188,"target":31},{"source":75,"value":134,"target":30},{"source":56,"value":13927,"target":10},{"source":56,"value":12576,"target":14},{"source":56,"value":13039,"target":12},{"source":56,"value":14275,"target":24},{"source":56,"value":13427,"target":17},{"source":17,"value":155134,"target":43},{"source":56,"value":11969,"target":11},{"source":24,"value":159665,"target":37},{"source":56,"value":13086,"target":3},{"source":56,"value":12852,"target":13},{"source":56,"value":12088,"target":7},{"source":56,"value":13732,"target":4},{"source":56,"value":13041,"target":8},{"source":56,"value":14932,"target":28},{"source":3,"value":147040,"target":44},{"source":12,"value":161423,"target":47},{"source":30,"value":26,"target":41},{"source":77,"value":167364,"target":25},{"source":53,"value":15012,"target":28},{"source":53,"value":13065,"target":8},{"source":53,"value":12019,"target":7},{"source":53,"value":13725,"target":4},{"source":53,"value":13119,"target":3},{"source":53,"value":12885,"target":13},{"source":53,"value":11995,"target":11},{"source":7,"value":153552,"target":67},{"source":19,"value":3,"target":41},{"source":1,"value":211,"target":29},{"source":70,"value":166,"target":6},{"source":1,"value":122,"target":32},{"source":70,"value":94,"target":31},{"source":45,"value":179,"target":6},{"source":70,"value":159,"target":30},{"source":45,"value":163,"target":31},{"source":70,"value":236,"target":29},{"source":70,"value":189,"target":32},{"source":1,"value":105,"target":6},{"source":1,"value":195,"target":31},{"source":1,"value":171,"target":30},{"source":1,"value":247,"target":27},{"source":70,"value":120,"target":26},{"source":70,"value":163,"target":27},{"source":69,"value":53222,"target":55},{"source":70,"value":178,"target":20},{"source":70,"value":141,"target":19},{"source":69,"value":53306,"target":65},{"source":69,"value":53185,"target":54},{"source":70,"value":101,"target":18},{"source":69,"value":53609,"target":61},{"source":70,"value":197,"target":16},{"source":69,"value":53677,"target":64},{"source":70,"value":146,"target":23},{"source":65,"value":4429,"target":19},{"source":69,"value":53176,"target":66},{"source":65,"value":3894,"target":23},{"source":69,"value":53804,"target":63},{"source":65,"value":4861,"target":16},{"source":65,"value":4130,"target":20},{"source":1,"value":128,"target":19},{"source":65,"value":4803,"target":26},{"source":1,"value":205,"target":23},{"source":65,"value":4613,"target":18},{"source":1,"value":176,"target":16},{"source":69,"value":53349,"target":68},{"source":1,"value":129,"target":20},{"source":65,"value":4244,"target":27},{"source":69,"value":53748,"target":46},{"source":1,"value":108,"target":26},{"source":1,"value":346,"target":18},{"source":26,"value":2,"target":41},{"source":45,"value":193,"target":23},{"source":45,"value":108,"target":20},{"source":45,"value":149,"target":19},{"source":50,"value":14031,"target":4},{"source":45,"value":210,"target":18},{"source":50,"value":11882,"target":3},{"source":45,"value":134,"target":16},{"source":50,"value":12493,"target":13},{"source":45,"value":173,"target":27},{"source":50,"value":13171,"target":11},{"source":45,"value":244,"target":26},{"source":22,"value":319,"target":26},{"source":50,"value":13579,"target":28},{"source":22,"value":283,"target":18},{"source":50,"value":12717,"target":8},{"source":75,"value":179,"target":29},{"source":50,"value":13319,"target":7},{"source":13,"value":159118,"target":21},{"source":22,"value":89,"target":27},{"source":75,"value":173,"target":32},{"source":22,"value":174,"target":19},{"source":22,"value":326,"target":23},{"source":22,"value":138,"target":16},{"source":22,"value":203,"target":20},{"source":22,"value":169,"target":32},{"source":40,"value":53385,"target":35},{"source":75,"value":237,"target":20},{"source":40,"value":53395,"target":34},{"source":22,"value":288,"target":29},{"source":75,"value":188,"target":16},{"source":22,"value":100,"target":30},{"source":75,"value":132,"target":18},{"source":22,"value":65,"target":31},{"source":40,"value":53783,"target":36},{"source":75,"value":105,"target":26},{"source":4,"value":159117,"target":57},{"source":75,"value":172,"target":23},{"source":75,"value":181,"target":19},{"source":75,"value":284,"target":27},{"source":45,"value":269,"target":32},{"source":45,"value":148,"target":29},{"source":45,"value":264,"target":30},{"source":25,"value":128,"target":23},{"source":38,"value":12674,"target":10},{"source":25,"value":159,"target":19},{"source":38,"value":12962,"target":14},{"source":38,"value":14447,"target":12},{"source":38,"value":13783,"target":24},{"source":25,"value":308,"target":18},{"source":52,"value":12196,"target":17},{"source":38,"value":12137,"target":17},{"source":25,"value":182,"target":26},{"source":25,"value":109,"target":20},{"source":25,"value":144,"target":16},{"source":27,"value":22,"target":41},{"source":2,"value":12840,"target":4},{"source":2,"value":13813,"target":7},{"source":52,"value":12276,"target":11},{"source":2,"value":13934,"target":8},{"source":52,"value":14189,"target":13},{"source":2,"value":13160,"target":28},{"source":74,"value":14472,"target":28},{"source":11,"value":152451,"target":42},{"source":72,"value":14414,"target":10},{"source":52,"value":14443,"target":28},{"source":72,"value":12647,"target":12},{"source":72,"value":13879,"target":14},{"source":72,"value":13897,"target":17},{"source":72,"value":12942,"target":24},{"source":52,"value":12719,"target":3},{"source":52,"value":12462,"target":4},{"source":2,"value":13498,"target":11},{"source":52,"value":12435,"target":7},{"source":2,"value":13739,"target":13},{"source":52,"value":14276,"target":8},{"source":2,"value":11531,"target":3},{"source":71,"value":11520,"target":3},{"source":71,"value":13736,"target":13},{"source":38,"value":14391,"target":8},{"source":71,"value":13730,"target":11},{"source":38,"value":14466,"target":28},{"source":71,"value":13115,"target":28},{"source":71,"value":13966,"target":8},{"source":71,"value":13679,"target":7},{"source":71,"value":12861,"target":4},{"source":74,"value":14468,"target":8},{"source":38,"value":12318,"target":11},{"source":74,"value":12432,"target":7},{"source":74,"value":12438,"target":4},{"source":74,"value":12677,"target":3},{"source":38,"value":12540,"target":4},{"source":74,"value":14171,"target":13},{"source":38,"value":12391,"target":7},{"source":74,"value":12336,"target":11},{"source":38,"value":14228,"target":13},{"source":38,"value":12713,"target":3},{"source":72,"value":11890,"target":3},{"source":72,"value":12453,"target":13},{"source":72,"value":13145,"target":11},{"source":74,"value":12148,"target":17},{"source":22,"value":233,"target":6},{"source":72,"value":13519,"target":28},{"source":74,"value":14414,"target":12},{"source":72,"value":12614,"target":8},{"source":74,"value":13772,"target":24},{"source":74,"value":12622,"target":10},{"source":72,"value":13247,"target":7},{"source":72,"value":14240,"target":4},{"source":74,"value":12972,"target":14},{"source":71,"value":12473,"target":24},{"source":71,"value":12526,"target":17},{"source":71,"value":14241,"target":14},{"source":71,"value":13975,"target":12},{"source":71,"value":13037,"target":10},{"source":2,"value":12516,"target":24},{"source":2,"value":12554,"target":17},{"source":2,"value":14318,"target":14},{"source":2,"value":13911,"target":12},{"source":2,"value":13041,"target":10},{"source":59,"value":161250,"target":5},{"source":8,"value":161250,"target":59},{"source":14,"value":160364,"target":39},{"source":73,"value":12548,"target":17},{"source":73,"value":14357,"target":14},{"source":73,"value":13052,"target":10},{"source":73,"value":12562,"target":24},{"source":6,"value":19,"target":41},{"source":73,"value":13967,"target":12},{"source":31,"value":22,"target":41},{"source":10,"value":161342,"target":0},{"source":73,"value":13062,"target":28},{"source":73,"value":13901,"target":8},{"source":73,"value":13590,"target":7},{"source":73,"value":12909,"target":4},{"source":73,"value":11541,"target":3},{"source":73,"value":13748,"target":13},{"source":73,"value":13554,"target":11},{"source":47,"value":161423,"target":48},{"source":39,"value":160364,"target":70},{"source":9,"value":13840,"target":14},{"source":9,"value":14344,"target":10},{"source":25,"value":99,"target":29},{"source":25,"value":253,"target":32},{"source":43,"value":155134,"target":15},{"source":50,"value":14421,"target":10},{"source":50,"value":13837,"target":14},{"source":37,"value":159665,"target":78},{"source":50,"value":13790,"target":17},{"source":25,"value":257,"target":31},{"source":25,"value":113,"target":30},{"source":50,"value":12659,"target":12},{"source":50,"value":12910,"target":24},{"source":25,"value":152,"target":6},{"source":52,"value":13821,"target":24},{"source":25,"value":293,"target":27},{"source":52,"value":14344,"target":12},{"source":52,"value":12975,"target":14},{"source":52,"value":12658,"target":10},{"source":49,"value":163835,"target":38},{"source":49,"value":163409,"target":73},{"source":49,"value":163529,"target":72},{"source":79,"value":160057,"target":72},{"source":79,"value":160213,"target":38},{"source":79,"value":159969,"target":73},{"source":79,"value":160034,"target":9},{"source":79,"value":160051,"target":71},{"source":79,"value":160099,"target":74},{"source":79,"value":160115,"target":56},{"source":49,"value":162933,"target":56},{"source":49,"value":162783,"target":51},{"source":49,"value":163172,"target":9},{"source":49,"value":163958,"target":71},{"source":49,"value":163838,"target":74},{"source":49,"value":162894,"target":52},{"source":9,"value":13214,"target":7},{"source":49,"value":163462,"target":2},{"source":9,"value":12600,"target":8},{"source":49,"value":163617,"target":50},{"source":9,"value":13534,"target":28},{"source":49,"value":163856,"target":53},{"source":9,"value":13219,"target":11},{"source":9,"value":12482,"target":13},{"source":9,"value":11910,"target":3},{"source":51,"value":11922,"target":11},{"source":9,"value":14264,"target":4},{"source":79,"value":160111,"target":53},{"source":51,"value":12871,"target":13},{"source":51,"value":13133,"target":3},{"source":51,"value":13794,"target":4},{"source":51,"value":12016,"target":7},{"source":51,"value":12998,"target":8},{"source":79,"value":159970,"target":51},{"source":79,"value":159925,"target":52},{"source":51,"value":14818,"target":28},{"source":79,"value":160018,"target":2},{"source":79,"value":160012,"target":50},{"source":51,"value":13424,"target":17},{"source":5,"value":199,"target":26},{"source":51,"value":14269,"target":24},{"source":5,"value":111,"target":27},{"source":5,"value":175,"target":16},{"source":5,"value":171,"target":18},{"source":5,"value":127,"target":19},{"source":5,"value":163,"target":20},{"source":5,"value":157,"target":23},{"source":62,"value":194,"target":20},{"source":62,"value":124,"target":16},{"source":62,"value":264,"target":23},{"source":62,"value":92,"target":19},{"source":62,"value":251,"target":27},{"source":9,"value":12903,"target":24},{"source":9,"value":12665,"target":12},{"source":62,"value":107,"target":18},{"source":62,"value":155,"target":26},{"source":9,"value":13840,"target":17},{"source":51,"value":12590,"target":14},{"source":51,"value":13028,"target":12},{"source":35,"value":4357,"target":6},{"source":51,"value":13925,"target":10},{"source":35,"value":4292,"target":29},{"source":35,"value":4632,"target":32},{"source":35,"value":4020,"target":31},{"source":35,"value":4776,"target":30},{"source":5,"value":187,"target":31},{"source":5,"value":401,"target":6},{"source":35,"value":4539,"target":18},{"source":35,"value":4785,"target":26},{"source":35,"value":4307,"target":27},{"source":5,"value":163,"target":32},{"source":5,"value":98,"target":29},{"source":5,"value":252,"target":30},{"source":40,"value":53677,"target":64},{"source":40,"value":53306,"target":65},{"source":40,"value":53222,"target":55},{"source":40,"value":53804,"target":63},{"source":40,"value":53176,"target":66},{"source":40,"value":53349,"target":68},{"source":40,"value":53748,"target":46},{"source":40,"value":53185,"target":54},{"source":40,"value":53609,"target":61},{"source":35,"value":4119,"target":20},{"source":35,"value":4941,"target":16},{"source":35,"value":3933,"target":23},{"source":35,"value":4501,"target":19},{"source":46,"value":4374,"target":27},{"source":34,"value":4465,"target":19},{"source":34,"value":4241,"target":20},{"source":34,"value":3903,"target":23},{"source":36,"value":4583,"target":18},{"source":36,"value":4828,"target":16},{"source":36,"value":4215,"target":20},{"source":36,"value":4472,"target":19},{"source":36,"value":3992,"target":23},{"source":46,"value":4536,"target":18},{"source":46,"value":4822,"target":26},{"source":46,"value":4201,"target":20},{"source":46,"value":4815,"target":16},{"source":46,"value":3886,"target":23},{"source":46,"value":4487,"target":19},{"source":48,"value":345,"target":19},{"source":48,"value":232,"target":23},{"source":48,"value":143,"target":16},{"source":48,"value":191,"target":20},{"source":78,"value":476,"target":23},{"source":36,"value":4803,"target":26},{"source":36,"value":4246,"target":27},{"source":34,"value":4543,"target":32},{"source":78,"value":247,"target":20},{"source":34,"value":4131,"target":29},{"source":78,"value":240,"target":19},{"source":34,"value":4980,"target":30},{"source":34,"value":4025,"target":31},{"source":34,"value":4477,"target":6},{"source":36,"value":4877,"target":30},{"source":34,"value":4568,"target":18},{"source":36,"value":4221,"target":29},{"source":34,"value":4804,"target":16},{"source":36,"value":4465,"target":6},{"source":34,"value":4300,"target":27},{"source":58,"value":218,"target":23},{"source":36,"value":4162,"target":31},{"source":34,"value":4760,"target":26},{"source":36,"value":4734,"target":32},{"source":15,"value":197,"target":23},{"source":28,"value":167364,"target":77},{"source":15,"value":60,"target":19},{"source":48,"value":210,"target":31},{"source":15,"value":182,"target":26},{"source":48,"value":113,"target":30},{"source":15,"value":114,"target":18},{"source":48,"value":82,"target":29},{"source":15,"value":136,"target":16},{"source":48,"value":207,"target":32},{"source":15,"value":240,"target":20},{"source":48,"value":157,"target":6},{"source":15,"value":197,"target":27},{"source":78,"value":225,"target":6},{"source":58,"value":150,"target":27},{"source":78,"value":209,"target":31},{"source":58,"value":244,"target":26},{"source":78,"value":107,"target":30},{"source":58,"value":267,"target":18},{"source":67,"value":153552,"target":62},{"source":78,"value":219,"target":29},{"source":58,"value":123,"target":16},{"source":78,"value":270,"target":32},{"source":58,"value":121,"target":20},{"source":58,"value":121,"target":19},{"source":58,"value":111,"target":31},{"source":58,"value":163,"target":6},{"source":58,"value":161,"target":29},{"source":58,"value":157,"target":30},{"source":78,"value":163,"target":26},{"source":78,"value":74,"target":27},{"source":58,"value":105,"target":32},{"source":78,"value":125,"target":16},{"source":78,"value":86,"target":18},{"source":48,"value":78,"target":27},{"source":15,"value":286,"target":32},{"source":15,"value":179,"target":29},{"source":48,"value":190,"target":18},{"source":48,"value":212,"target":26},{"source":15,"value":177,"target":6},{"source":15,"value":254,"target":30},{"source":15,"value":185,"target":31}]}');

  sankey
      .nodes(graph.nodes)
      .links(graph.links)
      .layout(32);

// add in the links
  var link = svg.append("g").selectAll(".link")
      .data(graph.links)
    .enter().append("path")
      .attr("class", "link")
      .attr("d", path)
      .style("stroke-width", function(d) { return Math.max(1, d.dy); })
      .sort(function(a, b) { return b.dy - a.dy; });

// add the link titles
  link.append("title")
        .text(function(d) {
            return d.source.name + " → " + 
                d.target.name + "\n" + format(d.value); });

// add in the nodes
  var node = svg.append("g").selectAll(".node")
      .data(graph.nodes)
    .enter().append("g")
      .attr("class", "node")
      .attr("transform", function(d) { 
          return "translate(" + d.x + "," + d.y + ")"; })
    .call(d3.behavior.drag()
      .origin(function(d) { return d; })
      .on("dragstart", function() { 
          this.parentNode.appendChild(this); })
      .on("drag", dragmove));

// add the rectangles for the nodes
  node.append("rect")
      .attr("height", function(d) { return d.dy; })
      .attr("width", sankey.nodeWidth())
      .style("fill", function(d) { 
          return d.color = color(d.name.replace(/ .*/, "")); })
      .style("stroke", function(d) { 
          return d3.rgb(d.color).darker(2); })
    .append("title")
      .text(function(d) { 
          return d.name + "\n" + format(d.value); });

// add in the title for the nodes
  node.append("text")
      .attr("x", -6)
      .attr("y", function(d) { return d.dy / 2; })
      .attr("dy", ".35em")
      .attr("text-anchor", "end")
      .attr("transform", null)
      .text(function(d) { return d.name; })
    .filter(function(d) { return d.x < width / 2; })
      .attr("x", 6 + sankey.nodeWidth())
      .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
            d.x = Math.max(0, Math.min(width - d.dx, d3.event.x))
        )
        + "," + (
            d.y = Math.max(0, Math.min(height - d.dy, d3.event.y))
        ) + ")");
    sankey.relayout();
    link.attr("d", path);
  }

</script>
</body>
</html>
